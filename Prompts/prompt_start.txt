Produce a closed-form analytical solution for the inverse kinematics of the following chain by completing the Python function. Positions and orientations are local coordinates.